<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paróquia Nossa Senhora da Conceição - Virgínia/MG</title>
    <!-- Carrega o Tailwind CSS CDN para estilização -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Configuração personalizada do Tailwind para um visual mais devocional (azul profundo e dourado) -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'parish-dark': '#0e1428', // Fundo principal, azul muito escuro
                        'parish-card': '#1a2039', // Fundo dos cards, ligeiramente mais claro
                        'parish-blue': '#3b82f6', // Azul claro para destaque (para eventos externos/secundários)
                        'parish-gold': '#FBBF24', // Dourado forte para contraste (para eventos principais)
                        'parish-red': '#dc2626', // Vermelho para avisos importantes
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        /* Estilos customizados para a fonte Inter e fundo Dark Mode */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0e1428; /* Fundo principal escuro */
            color: #f1f1f1; /* Texto padrão claro */
        }
        /* Estilo para a aba ativa na navegação principal */
        .nav-active {
            color: #FBBF24 !important; /* Dourado */
            border-color: #FBBF24 !important; /* Dourado */
        }
        /* Estilo para o carrossel de dias */
        .day-active {
            background-color: #FBBF24 !important; /* Dourado */
            color: #0e1428 !important; /* Dark */
            font-weight: 800;
        }
        .day-button {
            transition: all 0.2s;
            min-width: 70px; /* Aumentado para melhor toque/clique */
            margin-right: 8px; /* Espaçamento entre os botões */
            height: 90px; /* Aumentado a altura para incluir a liturgia */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        /* Estilo específico para o texto da liturgia dentro do botão */
        .liturgical-text {
            font-size: 0.6rem; /* Texto pequeno para não competir */
            font-weight: 500;
            margin-top: 4px;
            line-height: 1;
            display: block;
        }
        /* Garante que o carrossel seja scrollable */
        #day-carousel {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch; /* Melhora o scroll em iOS */
        }
        /* Esconde a barra de scroll horizontal */
        #day-carousel::-webkit-scrollbar {
            display: none;
        }
        #day-carousel {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        /* Container das abas */
        #desktop-nav {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        /* Estilo para o menu hambúrguer (mobile) */
        #mobile-menu {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background-color: #1a2039; /* Cor do card */
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1rem 0;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
        }
        .nav-link.tab-button {
            padding-bottom: 0.75rem; 
            padding-left: 0.5rem;
            padding-right: 0.5rem;
        }
        /* Estilo para a barra do cabeçalho fixo */
        .header-bar {
            background-color: #1a2039; /* Cor de card para a barra superior */
        }
    </style>
</head>
<body class="text-gray-100">

    <!-- Navbar e Cabeçalho (Fixo e com Z-INDEX Máximo) -->
    <header class="header-bar shadow-xl sticky top-0 z-[9999] bg-parish-card"> 
        <div class="container mx-auto px-4 py-4">
            <!-- Top Bar: Logo/Name + Hamburguer/Jubilee -->
            <div class="flex justify-between items-center pb-4">
                
                <!-- Name Block -->
                <div class="flex flex-col">
                    <a href="#" class="text-xl font-extrabold text-parish-gold tracking-wider leading-none">PARÓQUIA</a>
                    <p class="text-xs text-white/80 leading-none">Nossa Senhora da Conceição - Virgínia-MG</p>
                </div>
                
                <!-- Mobile Menu Button (Hamburger) e Jubilee Info -->
                <div class="flex items-center space-x-4">
                    <!-- Jubilee Info (Apenas em telas maiores ou centralizado no topo em mobile) -->
                    <div class="text-right hidden sm:block">
                        <p class="text-xs text-white/70 leading-none">Ano Jubilar</p>
                        <p class="text-base font-bold text-parish-blue leading-none">1866 – 2026</p>
                    </div>

                    <!-- Hamburger Icon (Somente em Mobile) -->
                    <button id="menu-toggle" class="sm:hidden text-white hover:text-parish-gold focus:outline-none">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Mobile Menu Content (Aparece ao clicar no Hambúrguer) -->
            <nav id="mobile-menu" class="hidden sm:hidden z-[9990]">
                <div class="flex flex-col space-y-2 text-base font-semibold">
                    <a href="#" class="nav-link tab-button py-2 px-4 hover:bg-parish-dark/50 rounded-lg text-white" data-target="content-agenda">AGENDA</a>
                    <a href="#" class="nav-link tab-button py-2 px-4 hover:bg-parish-dark/50 rounded-lg text-white" data-target="content-noticias">NOTÍCIAS</a>
                    <a href="#" class="nav-link tab-button py-2 px-4 hover:bg-parish-dark/50 rounded-lg text-white" data-target="content-jubileu">JUBILEU</a>
                    <a href="#" class="nav-link tab-button py-2 px-4 hover:bg-parish-dark/50 rounded-lg text-white" data-target="content-oracao">ORAÇÃO</a>
                    <a href="#" class="nav-link tab-button py-2 px-4 hover:bg-parish-dark/50 rounded-lg text-white" data-target="content-hino">HINO</a>
                    <a href="#" class="nav-link tab-button py-2 px-4 hover:bg-parish-dark/50 rounded-lg text-white" data-target="content-informacoes">INFORMAÇÕES</a>
                    <a href="#" class="nav-link tab-button py-2 px-4 hover:bg-parish-dark/50 rounded-lg text-white" data-target="content-contato">CONTATOS</a>
                </div>
            </nav>

            <!-- Desktop Tab Navigation (Aparece apenas em Desktop/Tablet) -->
            <nav class="overflow-x-auto whitespace-nowrap hidden sm:block" id="desktop-nav">
                <div class="inline-flex space-x-6 text-base font-semibold">
                    <!-- Abas replicadas para o Desktop -->
                    <a href="#" class="nav-link tab-button nav-active text-parish-gold border-b-2 border-parish-gold transition duration-300 flex items-center" data-target="content-agenda">AGENDA</a>
                    <a href="#" class="nav-link tab-button text-white hover:text-parish-gold transition duration-300 flex items-center" data-target="content-noticias">NOTÍCIAS</a>
                    <a href="#" class="nav-link tab-button text-white hover:text-parish-gold transition duration-300 flex items-center" data-target="content-jubileu">JUBILEU</a>
                    <a href="#" class="nav-link tab-button text-white hover:text-parish-gold transition duration-300 flex items-center" data-target="content-oracao">ORAÇÃO</a>
                    <a href="#" class="nav-link tab-button text-white hover:text-parish-gold transition duration-300 flex items-center" data-target="content-hino">HINO</a>
                    <a href="#" class="nav-link tab-button text-white hover:text-parish-gold transition duration-300 flex items-center" data-target="content-informacoes">INFORMAÇÕES</a>
                    <a href="#" class="nav-link tab-button text-white hover:text-parish-gold transition duration-300 flex items-center" data-target="content-contato">CONTATOS</a>
                </div>
            </nav>
        </div>
        
        <!-- DAY CAROUSEL CONTAINER (AGORA FIXO COM O HEADER E CONTROLADO PELO JS) -->
        <div id="day-carousel-wrapper" class="hidden bg-parish-card border-t border-gray-800 pt-4 pb-2">
            <div id="day-carousel" class="flex flex-row justify-start space-x-2 sm:space-x-4 mx-auto px-4 whitespace-nowrap max-w-7xl">
                <!-- Estes botões serão preenchidos via JavaScript -->
            </div>
        </div>
    </header>

    <!-- CONTAINER PRINCIPAL DE CONTEÚDO (Controlado por JS) -->
    <main class="container mx-auto px-4 py-10">
        
        <!-- ========================================================= -->
        <!-- SEÇÃO 1: AGENDA (VISÍVEL POR PADRÃO) -->
        <!-- ========================================================= -->
        <section id="content-agenda" class="content-section mb-20 relative z-10">
            <h2 class="text-4xl font-bold text-center text-parish-gold mb-10">Agenda Mensal</h2>

            <!-- Alerta Dinâmico (Aviso de Missas fora da Matriz - Aparece 1 dia antes) -->
            <div id="dynamic-alert" class="hidden bg-parish-blue/10 border-l-4 border-parish-blue p-4 rounded-lg mb-8 shadow-xl">
                <p class="font-bold text-parish-blue flex items-center">
                    AVISO:
                </p>
                <p id="alert-message" class="text-sm mt-1 text-gray-200"></p>
            </div>

            <!-- O CARROSSEL DE DIAS FOI MOVIDO PARA DENTRO DO <HEADER> -->

            <!-- Título do Dia Selecionado + Dia Litúrgico -->
            <h3 id="current-day-title" class="text-3xl font-extrabold text-center text-white mb-2"></h3>
            <p id="liturgical-day" class="text-xl font-semibold text-center text-parish-blue mb-8"></p>

            <!-- Lista de Eventos do Dia (Container Dinâmico) -->
            <div id="daily-agenda-list" class="bg-parish-card p-6 rounded-xl shadow-2xl space-y-4">
                <!-- Conteúdo da agenda será injetado aqui pelo JavaScript -->
            </div>
            
        </section>


        <!-- ========================================================= -->
        <!-- SEÇÃO 2: NOTÍCIAS (OCULTA POR PADRÃO) -->
        <!-- ========================================================= -->
        <section id="content-noticias" class="content-section mb-20 hidden bg-parish-card p-8 rounded-xl shadow-2xl relative z-10">
            <h2 class="section-title text-4xl font-bold text-center text-parish-gold mb-10">Últimas Notícias da Paróquia</h2>
            <div class="text-center text-gray-400 py-10">
                <p class="text-xl">Esta seção está sendo preparada!</p>
                <p class="mt-2">Em breve você encontrará comunicados, avisos e eventos recentes da comunidade aqui.</p>
                <img src="https://placehold.co/400x150/1a2039/3b82f6?text=Not%C3%ADcias+em+Breve" alt="Placeholder para notícias" class="mx-auto mt-6 rounded-lg shadow-md" onerror="this.onerror=null; this.src='https://placehold.co/400x150/1a2039/3b82f6?text=Not%C3%ADcias+em+Breve';" />
            </div>
        </section>

        <!-- ========================================================= -->
        <!-- SEÇÃO 3: JUBILEU (OCULTA POR PADRÃO) -->
        <!-- ========================================================= -->
        <section id="content-jubileu" class="content-section mb-20 hidden bg-parish-card p-8 rounded-xl shadow-2xl relative z-10">
            <h2 class="section-title text-4xl font-bold text-center text-parish-gold mb-10">Ano Jubilar 160 Anos (1866 – 2026)</h2>
            <div class="text-center text-gray-400 py-10">
                <p class="text-xl font-bold text-parish-blue">O Caminho Jubilar Continua!</p>
                <p class="mt-4">Prepare-se para as celebrações especiais dos 160 anos de fé da nossa Paróquia.</p>
                <p class="mt-2 text-sm">Abertura oficial: 15 de Novembro (verifique na agenda).</p>
                <img src="https://placehold.co/400x150/1a2039/fbbd24?text=Jubileu+160+Anos" alt="Placeholder para Jubileu" class="mx-auto mt-6 rounded-lg shadow-md" onerror="this.onerror=null; this.src='https://placehold.co/400x150/1a2039/fbbd24?text=Jubileu+160+Anos';" />
            </div>
        </section>

        <!-- ========================================================= -->
        <!-- SEÇÃO 3B: ORAÇÃO DO JUBILEU (OCULTA POR PADRÃO) -->
        <!-- ========================================================= -->
        <section id="content-oracao" class="content-section mb-20 hidden bg-parish-card p-8 rounded-xl shadow-2xl relative z-10">
            <h2 class="section-title text-4xl font-bold text-center text-parish-gold mb-10">Oração do Jubileu de 160 Anos</h2>
            <div class="text-center max-w-xl mx-auto space-y-4">
                <p class="text-lg text-gray-300">
                    <strong class="text-parish-blue block mb-2">ANOS JUBILAR: 1866 – 2026</strong>
                </p>
                <p class="text-lg leading-relaxed">
                    Deus Todo-poderoso, Senhor do Tempo e da História, a Ti elevamos nossa voz neste Ano de Graça.
                </p>
                <p class="text-lg leading-relaxed">
                    Somos herdeiros de 160 anos de fé que não se dobrou, e Te bendizemos por cada vida iluminada, por cada Sacramento que fez este Templo pulsar com a força do Teu Reino.
                </p>
                <p class="text-lg leading-relaxed font-semibold text-parish-gold">
                    Senhor Jesus Cristo, Fonte Eterna de Misericórdia, concede-nos viver este Jubileu com coração renovado.
                </p>
                <p class="text-lg leading-relaxed">
                    Purifica-nos. Reconcilia-nos. Reergue-nos na luz da Tua Ressurreição, para que sejamos um só povo, firme e ardente na fé.
                </p>
                <p class="text-lg leading-relaxed">
                    Que a memória dos que vieram antes de nós seja chama que não se apaga e nos impulsione a levar o Evangelho com coragem, esperança e verdade.
                </p>
                <p class="text-lg leading-relaxed font-semibold text-parish-gold">
                    Nossa Senhora da Conceição, Mãe e Padroeira, estrela que guia os passos desta Paróquia, intercede por nós.
                </p>
                <p class="text-lg leading-relaxed">
                    Guarda-nos no Teu manto, inspira-nos com o Teu "Sim" e conduz-nos a uma nova primavera espiritual.
                </p>
                <p class="text-lg leading-relaxed">
                    Pai santo, recebe este Jubileu como oferta viva, para Tua glória e para a salvação das almas.
                </p>
                <p class="text-lg leading-relaxed">
                    Por nosso Senhor Jesus Cristo, vosso Filho, que é Deus, e contigo vive e reina, na unidade do Espírito Santo, por todos os séculos dos séculos.
                </p>
                <p class="text-2xl font-extrabold text-parish-blue mt-6">Amém.</p>
            </div>
        </section>

        <!-- ========================================================= -->
        <!-- SEÇÃO 3C: HINO DO JUBILEU (OCULTA POR PADRÃO) -->
        <!-- ========================================================= -->
        <section id="content-hino" class="content-section mb-20 hidden bg-parish-card p-8 rounded-xl shadow-2xl relative z-10">
            <h2 class="section-title text-4xl font-bold text-center text-parish-gold mb-10">Hino do Jubileu de 160 Anos</h2>
            <div class="text-center max-w-xl mx-auto space-y-6">
                <p class="text-lg text-gray-300">
                    <strong class="text-parish-blue block mb-2">Paróquia Nossa Senhora da Conceição - Virgínia-MG</strong>
                    <span class="block text-sm text-gray-400">ANO JUBILAR: 1866 – 2026</span>
                </p>
                
                <div class="text-lg leading-relaxed space-y-4 text-white/90">
                    <p>
                        Aqui nesta terra, ornada de serra,<br>
                        Coberta pelo céu azul anil,<br>
                        Nasceu nossa fé, que o tempo não encerra,<br>
                        Abençoando este chão do Brasil.<br>
                        Nesta alvorada bendita e festiva,<br>
                        A semente de Cristo cresceu,<br>
                        E é a vossa presença, ó Mãe compassiva,<br>
                        Nossa Paróquia edificou.
                    </p>
                    <p class="font-extrabold text-parish-gold">
                        Soberana da pátria celeste,<br>
                        Velai por Virgínia querida;<br>
                        Nossa Paróquia em festa celebra<br>
                        O jubileu de cento e sessenta anos de história!
                    </p>
                    <p>
                        Gerações que aqui receberam<br>
                        o santo batismo e a união,<br>
                        Em cada jornada da vida souberam<br>
                        Buscar em Vós consolação.<br>
                        As preces dos filhos que aqui cresceram<br>
                        Sustentam a força da missão,<br>
                        E o amor que em Cristo sempre viveram<br>
                        Guia firme todo o coração.
                    </p>
                    <p class="font-extrabold text-parish-gold">
                        Soberana da pátria celeste,<br>
                        Velai por Virgínia querida;<br>
                        Nossa Paróquia em festa celebra<br>
                        O jubileu de cento e sessenta anos de história!
                    </p>
                    <p>
                        Que a fé que herdamos acesa<br>
                        Nos guarde em Vós, fortaleza.<br>
                        Que a nossa Paróquia seja<br>
                        Sinal de esperança e fé.<br>
                        E que o Evangelho, nossa luz,<br>
                        Nos leve sempre ao Cristo Jesus.
                    </p>
                    <p class="font-extrabold text-parish-gold">
                        Soberana da pátria celeste,<br>
                        Velai por Virgínia querida;<br>
                        Nossa Paróquia em festa celebra<br>
                        O jubileu de cento e sessenta anos de história!
                    </p>
                </div>
            </div>
        </section>
        
        <!-- ========================================================= -->
        <!-- SEÇÃO 4: INFORMAÇÕES (Antiga História) (OCULTA POR PADRÃO) -->
        <!-- ========================================================= -->
        <section id="content-informacoes" class="content-section mb-20 hidden bg-parish-card p-8 rounded-xl shadow-2xl relative z-10">
            <h2 class="section-title text-4xl font-bold text-center text-parish-gold mb-10">Informações e História de Fé</h2>
            
            <div class="md:flex md:space-x-8 items-center">
                <div class="md:w-1/2">
                    <p class="mb-4 text-lg leading-relaxed text-gray-300">
                        A história da Paróquia Nossa Senhora da Conceição, em Virgínia/MG, remonta à segunda metade do século XIX, sendo oficialmente <strong class="text-parish-blue">criada em 15 de novembro de 1866</strong>.
                    </p>
                    <p class="mb-4 text-lg leading-relaxed text-gray-300">
                        O marco inicial foi a passagem do <strong class="text-parish-blue">Padre Custódio de Oliveira Monte-Raso</strong>, que, sensibilizado pela distância que os moradores tinham que percorrer até a freguesia de Pouso Alto, sugeriu a construção de uma capela.
                    </p>
                    <p class="mb-4 text-lg leading-relaxed text-gray-300">
                        Em um ato de profunda devoção, os fazendeiros Diogo José Labat Uchôas e Francisco Ribeiro Pires doaram terras para a edificação do templo. A capela foi dedicada à <strong class="text-parish-gold">Nossa Senhora da Conceição</strong>, e a nova povoação recebeu o nome de **"Virgínea"** (que mais tarde se tornou Virgínia), uma homenagem à Virgem Santíssima e em alusão à mata virgem que cobria o local.
                    </p>
                    <p class="text-lg font-semibold text-parish-blue mt-4">
                        Somos uma comunidade de fé com mais de 150 anos de história, filiada à Diocese de Campanha.
                    </p>
                </div>
                <div class="md:w-1/2 mt-8 md:mt-0">
                    <!-- Placeholder para ícone ou imagem histórica -->
                    <img src="https://placehold.co/600x400/93c5fd/1e40af?text=Virgem+Imaculada" 
                        alt="Imagem de Nossa Senhora da Conceição ou brasão paroquial" 
                        class="w-full h-auto object-cover rounded-xl shadow-xl border-4 border-parish-gold"
                        onerror="this.onerror=null; this.src='https://placehold.co/600x400/93c5fd/1e40af?text=S%C3%ADmbolo+de+Maria';"
                    />
                </div>
            </div>
        </section>

        <!-- ========================================================= -->
        <!-- SEÇÃO 5: CONTATO (OCULTA POR PADRÃO) - REVITALIZADA -->
        <!-- ========================================================= -->
        <section id="content-contato" class="content-section mb-16 hidden relative z-10">
            <h2 class="section-title text-4xl font-bold text-center text-parish-gold mb-10">Contatos, Secretaria e Liderança</h2>

            <div class="space-y-8">
                <!-- Card 1: Liderança Clerical (Padres) - Título removido conforme solicitado -->
                <div class="bg-parish-card p-6 rounded-xl shadow-2xl">
                    <!-- Conteúdo do card é a Liderança Clerical -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 pt-2">
                        <div>
                            <p class="text-lg font-medium text-gray-300">Administrador Paroquial:</p>
                            <p class="text-xl font-extrabold text-parish-blue mt-1">Pe. Érick de Oliveira e Silva</p>
                        </div>
                        <div>
                            <p class="text-lg font-medium text-gray-300">Vigário Paroquial:</p>
                            <p class="text-xl font-extrabold text-parish-blue mt-1">Pe. Edimilson Luiz Ribeiro, SF</p>
                        </div>
                    </div>
                </div>

                <!-- Card 2: Informações da Secretaria - Telefones Corrigidos -->
                <div class="bg-parish-card p-6 rounded-xl shadow-2xl">
                    <h3 class="text-2xl font-bold mb-4 text-parish-gold border-b border-gray-700 pb-2">Secretaria Paroquial</h3>
                    <div class="space-y-3 text-lg text-gray-300">
                        <p class="font-medium">
                            <span class="text-parish-blue pr-2">Endereço:</span> Praça Cônego Monte Raso, nº 304, Virgínia/MG
                        </p>
                        <!-- NOVO TELEFONE FIXO COM RAMAL -->
                        <p class="font-medium">
                            <span class="text-parish-blue pr-2">Telefone (Fixo):</span> (35) 3261-1217 ramal 8007
                        </p>
                        <!-- WHATSAPP ATUALIZADO -->
                        <p class="font-medium">
                            <span class="text-parish-blue pr-2">WhatsApp:</span> (35) 3373-1397
                        </p>
                        <p class="font-medium">
                            <span class="text-parish-blue pr-2">E-mail:</span> <a href="mailto:paroquiavirginia@yahoo.com.br" class="text-parish-blue hover:underline">paroquiavirginia@yahoo.com.br</a>
                        </p>
                    </div>
                </div>

                <!-- Card 3: Localização (Mapa) -->
                <div class="bg-parish-card p-6 rounded-xl shadow-2xl">
                    <h3 class="text-2xl font-bold mb-4 text-parish-gold border-b border-gray-700 pb-2">Onde nos Encontrar (Igreja Matriz)</h3>
                    <div class="rounded-xl overflow-hidden shadow-xl mt-4">
                        <iframe 
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d14820.751688647575!2d-45.05068225!3d-22.3804812!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x94c9794d216d7a4b%3A0x8670c53d6199f1a0!2sVirg%C3%ADnia%2C%20MG%2C%2037465-000!5e0!3m2!1spt-BR!2sbr!4v1700684200000!5m2!1spt-BR!2sbr" 
                            width="100%" 
                            height="300" 
                            style="border:0;" 
                            allowfullscreen="" 
                            loading="lazy" 
                            referrerpolicy="no-referrer-when-downgrade"
                            title="Localização de Virgínia, MG">
                        </iframe>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-gray-400 py-8">
        <div class="container mx-auto px-4 text-center">
            <p class="mb-2">&copy; 2025 Paróquia Nossa Senhora da Conceição, Virgínia/MG. Todos os direitos reservados.</p>
            <p class="text-sm">Desenvolvido para GitHub Pages | Diocese de Campanha.</p>
        </div>
    </footer>

    <!-- Script para o Menu Mobile, Navegação por Abas e Agenda Dinâmica -->
    <script>
        // Variável GLOBAL para rastrear o dia ativo. É crucial para que o menu de abas
        // não resete a visualização para um dia fixo.
        let activeDay = '23'; // Define o dia inicial para a data de hoje (23 de Novembro)

        const dailyAgendaData = {
            // DIAS LITÚRGICOS CORRIGIDOS COM FOCO NA ESTRUTURA LITÚRGICA
            '1': {
                dayName: 'SÁBADO',
                liturgical: 'SOLENIDADE de Todos os Santos',
                dateStr: '01/Nov',
                events: [
                    { title: 'Casamento', subtitle: 'Igreja Matriz', time: '09:00', church: 'Matriz', color: 'parish-blue' },
                    { title: 'Benção', subtitle: 'Bairro Marques', time: '11:00', church: 'Comunidade', color: 'parish-blue' },
                    { title: 'Casamento', subtitle: 'Igreja Matriz', time: '14:00', church: 'Matriz', color: 'parish-blue' },
                    { title: 'Catequese', subtitle: 'Igreja Matriz', time: '16:00', church: 'Matriz', color: 'parish-gold' },
                    { title: 'Vigília', subtitle: 'Igreja Matriz', time: '18:00', church: 'Matriz', color: 'parish-gold' },
                    { title: 'Santa Missa', subtitle: 'Igreja Matriz', time: '19:00', church: 'Matriz', color: 'parish-gold' },
                ]
            },
            '2': {
                dayName: 'DOMINGO',
                liturgical: 'Comemoração de Todos os Fiéis Defuntos',
                dateStr: '02/Nov',
                events: [
                    { title: 'Santa Missa', subtitle: 'Cemitério', time: '05:00', church: 'External', color: 'parish-red' }, // EXTERNAL
                    { title: 'Santa Missa Setor 6', subtitle: 'Bairro São José da Mantiqueira', time: '08:00', church: 'Comunidade', color: 'parish-blue' },
                    { title: 'Santa Missa', subtitle: 'Igreja Matriz', time: '09:00', church: 'Matriz', color: 'parish-gold' },
                    { title: 'Santa Missa Setor 1', subtitle: 'Bairro Mendes', time: '11:00', church: 'Comunidade', color: 'parish-blue' },
                    { title: 'Santa Missa Setor 3', subtitle: 'Bairro Corrêas', time: '17:00', church: 'Comunidade', color: 'parish-blue' },
                    { title: 'Santa Missa', subtitle: 'Igreja Matriz', time: '19:00', church: 'Matriz', color: 'parish-gold' },
                ]
            },
            '3': {
                dayName: 'SEGUNDA-FEIRA',
                liturgical: 'Segunda-feira da 31ª Semana do Tempo Comum',
                dateStr: '03/Nov',
                events: [
                    { title: 'Visita às obras', subtitle: 'Construção Pastoral', time: '14:00', church: 'Atendimento', color: 'text-gray-300' },
                    { title: 'Santa Missa', subtitle: 'Igreja Nossa Senhora Aparecida', time: '19:00', church: 'External', color: 'parish-red' }, // EXTERNAL
                ]
            },
            '4': {
                dayName: 'TERÇA-FEIRA',
                liturgical: 'Memória de São Carlos Borromeu, Bispo', // CORRIGIDO: Memória
                dateStr: '04/Nov',
                events: [
                    { title: 'Atendimento', subtitle: 'Secretaria Paroquial', time: '14:00', church: 'Atendimento', color: 'text-gray-300' }, 
                    { title: 'Santa Missa Setor 5', subtitle: 'Bairro Morangal', time: '19:00', church: 'Comunidade', color: 'parish-blue' },
                ]
            },
            '5': {
                dayName: 'QUARTA-FEIRA',
                liturgical: 'Quarta-feira da 31ª Semana do Tempo Comum',
                dateStr: '05/Nov',
                events: [
                    { title: 'Atendimento', subtitle: 'Secretaria Paroquial', time: '09:00', church: 'Atendimento', color: 'text-gray-300' }, 
                    { title: 'Visita aos enfermos', subtitle: 'Casa do Paroquiano', time: '16:00', church: 'Atendimento', color: 'text-gray-300' }, 
                    { title: 'Santa Missa Setor 7', subtitle: 'Bairro Serra Verde', time: '19:00', church: 'Comunidade', color: 'parish-blue' },
                ]
            },
            '6': {
                dayName: 'QUINTA-FEIRA',
                liturgical: 'Quinta-feira da 31ª Semana do Tempo Comum', // CORRIGIDO: Feria
                dateStr: '06/Nov',
                events: [
                    { title: 'Atendimento / Visita às obras', subtitle: 'Secretaria / Construção', time: '09:00', church: 'Atendimento', color: 'text-gray-300' },
                    { title: 'Visita aos enfermos', subtitle: 'Casa do Paroquiano', time: '14:00', church: 'Atendimento', color: 'text-gray-300' }, 
                    { title: 'Confissão', subtitle: 'Igreja Matriz', time: '17:00', church: 'Matriz', color: 'parish-gold' },
                    { title: 'Adoração ao Santíssimo', subtitle: 'Igreja Matriz', time: '18:00', church: 'Matriz', color: 'parish-gold' },
                    { title: 'Santa Missa', subtitle: 'Igreja Matriz', time: '19:00', church: 'Matriz', color: 'parish-gold' },
                    { title: 'Santa Missa Setor 2', subtitle: 'Bairro Porto', time: '19:00', church: 'Comunidade', color: 'parish-blue' },
                    // COMPROMISSO REESTABELECIDO (Não deve disparar alerta)
                    { title: 'Reunião Irmandade do Santíssimo', subtitle: 'Salão Paroquial', time: '20:00', church: 'External', color: 'parish-red' }, 
                ]
            },
            '7': {
                dayName: 'SEXTA-FEIRA',
                liturgical: 'Sexta-feira da 31ª Semana do Tempo Comum',
                dateStr: '07/Nov',
                events: [
                    { title: 'Atendimento', subtitle: 'Secretaria Paroquial', time: '09:00', church: 'Atendimento', color: 'text-gray-300' },
                    { title: 'Visita ao Abrigo S. Camilo', subtitle: 'Ronda Pastoral', time: '14:00', church: 'External', color: 'parish-red' }, // EXTERNAL
                    { title: 'Adoração ao Santíssimo', subtitle: 'Igreja Matriz', time: '18:00', church: 'Matriz', color: 'parish-gold' },
                    { title: 'Santa Missa', subtitle: 'Igreja Matriz', time: '19:00', church: 'Matriz', color: 'parish-gold' },
                    { title: 'Santa Missa Setor 4', subtitle: 'Bairro Moreiras', time: '19:00', church: 'Comunidade', color: 'parish-blue' },
                ]
            },
            '8': {
                dayName: 'SÁBADO',
                liturgical: 'Sábado: Memória de Nossa Senhora', // CORRIGIDO: Mais específico
                dateStr: '08/Nov',
                events: [
                    { title: 'Casamento', subtitle: 'Igreja São José (External)', time: '09:00', church: 'External', color: 'parish-red' }, // EXTERNAL
                    { title: 'Casamento', subtitle: 'Igreja Matriz', time: '11:00', church: 'Matriz', color: 'parish-blue' },
                    { title: 'Santa Missa', subtitle: 'Igreja Matriz', time: '16:00', church: 'Matriz', color: 'parish-gold' },
                    { title: 'Santa Missa Setor 5', subtitle: 'Bairro Marques', time: '19:00', church: 'Comunidade', color: 'parish-blue' },
                    { title: 'Santa Missa', subtitle: 'Igreja Matriz', time: '19:00', church: 'Matriz', color: 'parish-gold' },
                ]
            },
            '9': {
                dayName: 'DOMINGO',
                liturgical: 'FESTA da Dedicação da Basílica de Latrão',
                dateStr: '09/Nov',
                events: [
                    { title: 'Santa Missa', subtitle: 'Igreja Matriz', time: '07:00', church: 'Matriz', color: 'parish-gold' },
                    { title: 'Santa Missa', subtitle: 'Igreja Matriz', time: '09:00', church: 'Matriz', color: 'parish-gold' },
                    { title: 'Santa Missa Setor 3', subtitle: 'Bairro Mogiano', time: '09:00', church: 'Comunidade', color: 'parish-blue' },
                    { title: 'Batizado', subtitle: 'Igreja Matriz', time: '10:00', church: 'Matriz', color: 'parish-gold' },
                    { title: 'Santa Missa Setor 5', subtitle: 'Bairro Retirinho', time: '18:00', church: 'Comunidade', color: 'parish-blue' },
                    { title: 'Santa Missa', subtitle: 'Igreja Matriz', time: '19:00', church: 'Matriz', color: 'parish-gold' },
                ]
            },
            '10': {
                dayName: 'SEGUNDA-FEIRA',
                liturgical: 'Memória de São Leão Magno, Papa e Doutor',
                dateStr: '10/Nov',
                events: [
                    { title: 'Visita às obras', subtitle: 'Construção Pastoral', time: '09:00', church: 'Atendimento', color: 'text-gray-300' },
                    { title: 'Atendimento/Confissões (Eucaristia)', subtitle: 'Vargem Alegre e Retiro dos Marins', time: '16:00', church: 'Atendimento', color: 'text-gray-300' },
                    { title: 'Santa Missa Setor 5', subtitle: 'Bairro Pouso Frio', time: '19:00', church: 'Comunidade', color: 'parish-blue' },
                ]
            },
            '11': {
                dayName: 'TERÇA-FEIRA',
                liturgical: 'Memória de São Martinho de Tours, Bispo',
                dateStr: '11/Nov',
                events: [
                    { title: 'Atendimento', subtitle: 'Secretaria Paroquial', time: '09:00', church: 'Atendimento', color: 'text-gray-300' },
                    { title: 'Confissões (Eucaristia)', subtitle: 'Serra Verde e Rio Acima II', time: '16:00', church: 'Atendimento', color: 'text-gray-300' },
                    { title: 'Santa Missa Setor 2', subtitle: 'Bairro Ribeirão', time: '19:00', church: 'Comunidade', color: 'parish-blue' },
                    { title: 'Santa Missa Setor 7', subtitle: 'Bairro Roseirinha', time: '19:00', church: 'Comunidade', color: 'parish-blue' },
                ]
            },
            '12': {
                dayName: 'QUARTA-FEIRA',
                liturgical: 'Memória de São Josafat, Bispo e Mártir',
                dateStr: '12/Nov',
                events: [
                    { title: 'Atendimento', subtitle: 'Secretaria Paroquial', time: '09:00', church: 'Atendimento', color: 'text-gray-300' },
                    { title: 'Santa Missa', subtitle: 'Abrigo São Camilo', time: '09:00', church: 'External', color: 'parish-red' }, // EXTERNAL
                    { title: 'Atendimento/Confissões (Eucaristia)', subtitle: 'Bairro Marques', time: '16:00', church: 'Atendimento', color: 'text-gray-300' },
                    { title: 'Santa Missa Setor 8', subtitle: 'Serra dos Fernandes', time: '19:00', church: 'Comunidade', color: 'parish-blue' },
                    { title: 'Formação MESC', subtitle: 'Salão Paroquial', time: '19:00', church: 'External', color: 'parish-red' }, // EXTERNAL
                ]
            },
            '13': {
                dayName: 'QUINTA-FEIRA',
                liturgical: 'Quinta-feira da 32ª Semana do Tempo Comum',
                dateStr: '13/Nov',
                events: [
                    { title: 'Atendimento / Visita às obras', subtitle: 'Secretaria / Construção', time: '09:00', church: 'Atendimento', color: 'text-gray-300' },
                    { title: 'Atendimento', subtitle: 'Secretaria Paroquial', time: '14:00', church: 'Atendimento', color: 'text-gray-300' },
                    { title: 'Confissão', subtitle: 'Igreja Matriz', time: '17:00', church: 'Matriz', color: 'parish-gold' },
                    { title: 'Adoração', subtitle: 'Igreja Matriz', time: '18:00', church: 'Matriz', color: 'parish-gold' },
                    { title: 'Confissão (Eucaristia)', subtitle: 'Bairro Palmeiras (Retirinho e Lavras)', time: '18:00', church: 'Atendimento', color: 'text-gray-300' },
                    { title: 'Santa Missa Setor 1', subtitle: 'Bairro Palmeiras', time: '19:00', church: 'Comunidade', color: 'parish-blue' },
                    { title: 'Santa Missa', subtitle: 'Igreja Matriz', time: '19:00', church: 'Matriz', color: 'parish-gold' },
                ]
            },
            '14': {
                dayName: 'SEXTA-FEIRA',
                liturgical: 'Sexta-feira da 32ª Semana do Tempo Comum',
                dateStr: '14/Nov',
                events: [
                    { title: 'Atendimento', subtitle: 'Secretaria Paroquial', time: '09:00', church: 'Atendimento', color: 'text-gray-300' },
                    { title: 'Confissão Primeira Eucaristia', subtitle: 'Cidade', time: '09:00', church: 'Atendimento', color: 'text-gray-300' },
                    { title: 'Confissão Primeira Eucaristia', subtitle: 'Bairro Moreiras', time: '15:00', church: 'Atendimento', color: 'text-gray-300' },
                    { title: 'Santa Missa Setor 7', subtitle: 'Bairro Vargem Alegre', time: '19:00', church: 'Comunidade', color: 'parish-blue' },
                    { title: 'Santa Missa Setor 7', subtitle: 'Bairro Mato Dentro', time: '19:00', church: 'Comunidade', color: 'parish-blue' },
                ]
            },
            '15': {
                dayName: 'SÁBADO',
                liturgical: 'Sábado da 32ª Semana do Tempo Comum', // CORRIGIDO: Priorizando a Liturgia oficial
                dateStr: '15/Nov',
                events: [
                    { title: 'Abertura Ano Jubilar', subtitle: 'Pouso Alto (Diocese)', time: '08:00', church: 'External', color: 'parish-red' }, // EXTERNAL
                    { title: 'Casamento', subtitle: 'Igreja Matriz', time: '09:00', church: 'Matriz', color: 'parish-blue' },
                    { title: 'Casamento', subtitle: 'Igreja São José', time: '11:00', church: 'External', color: 'parish-red' }, // EXTERNAL
                    { title: 'Santa Missa', subtitle: 'Igreja Matriz', time: '16:00', church: 'Matriz', color: 'parish-gold' },
                    { title: 'Santa Missa Setor 6', subtitle: 'Bairro São José da Mantiqueira', time: '19:00', church: 'Comunidade', color: 'parish-blue' },
                    { title: 'Santa Missa', subtitle: 'Igreja Matriz', time: '19:00', church: 'Matriz', color: 'parish-gold' },
                ]
            },
            '16': {
                dayName: 'DOMINGO',
                liturgical: 'XXXIII Domingo do Tempo Comum',
                dateStr: '16/Nov',
                events: [
                    { title: 'Santa Missa', subtitle: 'Igreja Matriz', time: '07:00', church: 'Matriz', color: 'parish-gold' },
                    { title: 'Santa Missa Setor 5', subtitle: 'Bairro Roseira', time: '08:00', church: 'Comunidade', color: 'parish-blue' },
                    { title: 'Santa Missa', subtitle: 'Igreja Matriz', time: '09:00', church: 'Matriz', color: 'parish-gold' },
                    { title: 'Santa Missa Setor 7', subtitle: 'Retiro dos Marins', time: '10:30', church: 'Comunidade', color: 'parish-blue' },
                    { title: 'Santa Missa Setor 4', subtitle: 'Bairro Moreiras', time: '18:00', church: 'Comunidade', color: 'parish-blue' },
                    { title: 'Santa Missa', subtitle: 'Igreja Matriz', time: '19:00', church: 'Matriz', color: 'parish-gold' },
                ]
            },
            '17': {
                dayName: 'SEGUNDA-FEIRA',
                liturgical: 'Memória de Santa Isabel da Hungria, Religiosa',
                dateStr: '17/Nov',
                events: [
                    { title: 'Atendimento', subtitle: 'Secretaria Paroquial', time: '09:00', church: 'Atendimento', color: 'text-gray-300' },
                    { title: 'Confissão Primeira Eucaristia', subtitle: 'Cidade', time: '14:00', church: 'Atendimento', color: 'text-gray-300' },
                    { title: 'Santa Missa Setor 9', subtitle: 'Sertãozinho D. Rosalia', time: '19:00', church: 'Comunidade', color: 'parish-blue' },
                ]
            },
            '18': {
                dayName: 'TERÇA-FEIRA',
                liturgical: 'Memória da Dedicação das Basílicas de S. Pedro e S. Paulo',
                dateStr: '18/Nov',
                events: [
                    { title: 'Santa Missa', subtitle: 'Abrigo São Camilo', time: '09:00', church: 'External', color: 'parish-red' }, // EXTERNAL
                    { title: 'Visita às obras', subtitle: 'Construção Pastoral', time: '14:00', church: 'Atendimento', color: 'text-gray-300' },
                    { title: 'Santa Missa Setor 5', subtitle: 'Bairro Felipe', time: '19:00', church: 'Comunidade', color: 'parish-blue' },
                ]
            },
            '19': {
                dayName: 'QUARTA-FEIRA',
                liturgical: 'Quarta-feira da 33ª Semana do Tempo Comum',
                dateStr: '19/Nov',
                events: [
                    { title: 'Atendimento', subtitle: 'Secretaria Paroquial', time: '09:00', church: 'Atendimento', color: 'text-gray-300' },
                    { title: 'Visita aos enfermos', subtitle: 'Casa do Paroquiano', time: '14:00', church: 'Atendimento', color: 'text-gray-300' },
                    { title: 'Santa Missa Setor 5', subtitle: 'Bairro Marques', time: '19:00', church: 'Comunidade', color: 'parish-blue' },
                ]
            },
            '20': {
                dayName: 'QUINTA-FEIRA',
                liturgical: 'Quinta-feira da 33ª Semana do Tempo Comum',
                dateStr: '20/Nov',
                events: [
                    { title: 'Atendimento', subtitle: 'Secretaria Paroquial', time: '09:00', church: 'Atendimento', color: 'text-gray-300' },
                    { title: 'Confissão', subtitle: 'Igreja Matriz', time: '17:00', church: 'Matriz', color: 'parish-gold' },
                    { title: 'Adoração', subtitle: 'Igreja Matriz', time: '18:00', church: 'Matriz', color: 'parish-gold' },
                    { title: 'Santa Missa', subtitle: 'Igreja Matriz', time: '19:00', church: 'Matriz', color: 'parish-gold' },
                    { title: 'Santa Missa Setor 7', subtitle: 'Bairro Gonçalves', time: '19:00', church: 'Comunidade', color: 'parish-blue' },
                ]
            },
            '21': {
                dayName: 'SEXTA-FEIRA',
                liturgical: 'Memória da Apresentação da Virgem Santa Maria',
                dateStr: '21/Nov',
                events: [
                    { title: 'Atendimento', subtitle: 'Secretaria Paroquial', time: '09:00', church: 'Atendimento', color: 'text-gray-300' },
                    { title: 'Atendimento', subtitle: 'Secretaria Paroquial', time: '14:00', church: 'Atendimento', color: 'text-gray-300' },
                    { title: 'Santa Missa Setor 6', subtitle: 'Bairro Torres', time: '19:00', church: 'Comunidade', color: 'parish-blue' },
                    { title: 'Santa Missa Setor 8', subtitle: 'Bairro Caeté', time: '19:00', church: 'Comunidade', color: 'parish-blue' },
                ]
            },
            '22': {
                dayName: 'SÁBADO',
                liturgical: 'Memória de Santa Cecília, Virgem e Mártir',
                dateStr: '22/Nov',
                events: [
                    { title: 'Casamento', subtitle: 'Igreja Matriz', time: '11:00', church: 'Matriz', color: 'parish-blue' },
                    { title: 'Casamento', subtitle: 'Bairro Retirinho', time: '16:00', church: 'Comunidade', color: 'parish-blue' },
                    { title: 'Santa Missa', subtitle: 'Igreja Matriz', time: '19:00', church: 'Matriz', color: 'parish-gold' },
                    { title: 'Santa Missa Setor 6', subtitle: 'Bairro São José da Mantiqueira', time: '16:00', church: 'Comunidade', color: 'parish-blue' },
                    { title: 'Santa Missa hotel?', subtitle: 'Bairro...', time: '18:00', church: 'External', color: 'parish-red' }, // EXTERNAL
                ]
            },
            
            // DIAS 23 a 30 (Final da Agenda)
            '23': {
                dayName: 'DOMINGO',
                liturgical: 'SOLENIDADE de Cristo Rei do Universo', 
                dateStr: '23/Nov',
                events: [
                    { title: 'Santa Missa', subtitle: 'Igreja Matriz', time: '07:00', church: 'Matriz', color: 'parish-gold' },
                    { title: 'Santa Missa Setor 3', subtitle: 'Bairro Mendanha', time: '09:00', church: 'Comunidade', color: 'parish-blue' },
                    { title: 'Santa Missa', subtitle: 'Igreja Matriz', time: '10:00', church: 'Matriz', color: 'parish-gold' },
                    { title: 'Primeira Eucaristia', subtitle: 'Igreja Matriz', time: '15:00', church: 'Matriz', color: 'parish-gold' },
                    { title: 'Santa Missa Setor 1', subtitle: 'Bairro Retirinho', time: '18:00', church: 'Comunidade', color: 'parish-blue' },
                    { title: 'Santa Missa', subtitle: 'Igreja Matriz', time: '19:00', church: 'Matriz', color: 'parish-gold' },
                ]
            },
            '24': {
                dayName: 'SEGUNDA-FEIRA',
                liturgical: 'Segunda-feira da 34ª Semana do Tempo Comum', 
                dateStr: '24/Nov',
                events: [
                    { title: 'Visita às obras', subtitle: 'Construção Pastoral', time: '09:00', church: 'Atendimento', color: 'text-gray-300' }, 
                    { title: 'Santa Missa', subtitle: 'Sagrado Coração', time: '18:00', church: 'External', color: 'parish-red' }, // EXTERNAL
                    // COMPROMISSO REESTABELECIDO (Não deve disparar alerta)
                    { title: 'Formação MESC', subtitle: 'Local não informado', time: '19:00', church: 'External', color: 'parish-red' },
                ]
            },
            '25': {
                dayName: 'TERÇA-FEIRA',
                liturgical: 'Terça-feira da 34ª Semana do Tempo Comum', 
                dateStr: '25/Nov',
                events: [
                    { title: 'Atendimento', subtitle: 'Secretaria Paroquial', time: '09:00', church: 'Atendimento', color: 'text-gray-300' },
                    { title: 'Atendimento', subtitle: 'Secretaria Paroquial', time: '14:00', church: 'Atendimento', color: 'text-gray-300' },
                    { title: 'Santa Missa Setor 4', subtitle: 'Bairro Pereiras', time: '19:00', church: 'Comunidade', color: 'parish-blue' },
                    { title: 'Santa Missa Setor 7', subtitle: 'Bairro Rio Acima II', time: '19:00', church: 'Comunidade', color: 'parish-blue' },
                    // COMPROMISSO REESTABELECIDO (Não deve disparar alerta)
                    { title: 'Reunião Setor 7', subtitle: 'Local não informado', time: '20:00', church: 'External', color: 'parish-red' }, 
                ]
            },
            '26': { 
                dayName: 'QUARTA-FEIRA',
                liturgical: 'Quarta-feira da 34ª Semana do Tempo Comum', 
                dateStr: '26/Nov',
                events: [
                    { title: 'Atendimento', subtitle: 'Secretaria Paroquial', time: '09:00', church: 'Atendimento', color: 'text-gray-300' }, 
                    { title: 'Santa Missa Setor 1', subtitle: 'Bairro Mendes', time: '19:00', church: 'Comunidade', color: 'parish-blue' },
                    { title: 'Santa Missa Setor 4', subtitle: 'Bairro Água Limpa', time: '19:00', church: 'Comunidade', color: 'parish-blue' },
                ]
            },
            '27': { 
                dayName: 'QUINTA-FEIRA',
                liturgical: 'Quinta-feira da 34ª Semana do Tempo Comum', 
                dateStr: '27/Nov',
                events: [
                    { title: 'Procissão', subtitle: 'Saindo da Igreja Matriz (até Pedra Santa)', time: '04:30', church: 'External', color: 'parish-red' }, 
                    { title: 'Santa Missa', subtitle: 'Pedra Santa (logo após a Procissão)', time: '05:00', church: 'External', color: 'parish-red' }, 
                    { title: 'Santa Missa', subtitle: 'Abrigo São Camilo', time: '09:00', church: 'External', color: 'parish-red' }, // EXTERNAL
                    { title: 'Atendimento', subtitle: 'Secretaria Paroquial', time: '14:00', church: 'Atendimento', color: 'text-gray-300' },
                    { title: 'Confissão', subtitle: 'Igreja Matriz', time: '17:00', church: 'Matriz', color: 'parish-gold' },
                    { title: 'Adoração', subtitle: 'Igreja Matriz', time: '18:00', church: 'Matriz', color: 'parish-gold' },
                    { title: 'Santa Missa Setor 1', subtitle: 'Bairro Muquém', time: '19:00', church: 'Comunidade', color: 'parish-blue' },
                    { title: 'Santa Missa', subtitle: 'Igreja Matriz', time: '19:00', church: 'Matriz', color: 'parish-gold' },
                ]
            },
            '28': {
                dayName: 'SEXTA-FEIRA',
                liturgical: 'Sexta-feira da 34ª Semana do Tempo Comum', 
                dateStr: '28/Nov',
                events: [
                    { title: 'Atendimento', subtitle: 'Secretaria Paroquial', time: '09:00', church: 'Atendimento', color: 'text-gray-300' }, 
                    { title: 'Atendimento', subtitle: 'Secretaria Paroquial', time: '14:00', church: 'Atendimento', color: 'text-gray-300' },
                    { title: 'Santa Missa Setor 7', subtitle: 'Bairro Vargem Alegre', time: '19:00', church: 'Comunidade', color: 'parish-blue' },
                    { title: 'Primeiro dia da Novena', subtitle: 'Igreja Matriz', time: '19:00', church: 'Matriz', color: 'parish-gold' }, 
                ]
            },
            '29': {
                dayName: 'SÁBADO',
                liturgical: 'Sábado da 34ª Semana do Tempo Comum', 
                dateStr: '29/Nov',
                events: [
                    { title: 'Casamento', subtitle: 'Igreja Matriz', time: '11:00', church: 'Matriz', color: 'parish-blue' },
                    { title: 'Santa Missa', subtitle: 'Igreja Matriz', time: '16:00', church: 'Matriz', color: 'parish-gold' }, 
                    { title: 'Santa Missa Setor 7', subtitle: 'Bairro Roseirinha', time: '16:00', church: 'Comunidade', color: 'parish-blue' },
                    { title: 'Segundo dia da Novena', subtitle: 'Igreja Matriz', time: '19:00', church: 'Matriz', color: 'parish-gold' }, 
                    { title: 'Santa Missa', subtitle: 'Igreja Matriz', time: '19:00', church: 'Matriz', color: 'parish-gold' },
                ]
            },
            '30': {
                dayName: 'DOMINGO',
                liturgical: '1º DOMINGO DO ADVENTO',
                dateStr: '30/Nov',
                events: [
                    { title: 'Santa Missa', subtitle: 'Igreja Matriz', time: '07:00', church: 'Matriz', color: 'parish-gold' },
                    { title: 'Santa Missa Setor 7', subtitle: 'Bairro Retiro dos Marins', time: '09:30', church: 'Comunidade', color: 'parish-blue' },
                    { title: 'Santa Missa Setor 1', subtitle: 'Bairro Palmeiras', time: '11:00', church: 'Comunidade', color: 'parish-blue' },
                    { title: 'Santa Missa Setor 5', subtitle: 'Bairro Roseira', time: '18:00', church: 'Comunidade', color: 'parish-blue' },
                    { title: 'Terceiro dia da Novena', subtitle: 'Igreja Matriz', time: '18:00', church: 'Matriz', color: 'parish-gold' }, 
                    { title: 'Santa Missa', subtitle: 'Igreja Matriz', time: '19:00', church: 'Matriz', color: 'parish-gold' },
                ]
            }
        };

        // ===============================================
        // LÓGICA DE NAVEGAÇÃO E GESTOS (SWIPE / PULL-TO-REFRESH)
        // ===============================================
        let touchstartX = 0;
        let touchendX = 0;
        let touchstartY = 0;
        let touchendY = 0;
        const swipeThreshold = 50; // Pixels para detectar swipe horizontal
        const pullThreshold = 80;  // Pixels para detectar swipe vertical (pull-to-refresh)
        const topOfPageThreshold = 20; // Limite de scroll para pull-to-refresh
        const allDays = Object.keys(dailyAgendaData);

        function checkDirection() {
            const currentDayElement = document.querySelector('.day-active');
            if (!currentDayElement) return;

            const currentDay = currentDayElement.id.replace('day-', '');
            const currentIndex = allDays.indexOf(currentDay);
            
            // 1. SWIPE HORIZONTAL (Troca de Dia na Agenda)
            // Verifica se o swipe horizontal foi mais significativo que o vertical
            if (Math.abs(touchendX - touchstartX) > swipeThreshold && Math.abs(touchendX - touchstartX) > Math.abs(touchendY - touchstartY)) {
                if (touchendX < touchstartX) { // Deslizar para a Esquerda (Próximo Dia)
                    const nextIndex = currentIndex + 1;
                    if (nextIndex < allDays.length) {
                        loadDailyAgenda(allDays[nextIndex]);
                    }
                } else if (touchendX > touchstartX) { // Deslizar para a Direita (Dia Anterior)
                    const prevIndex = currentIndex - 1;
                    if (prevIndex >= 0) {
                        loadDailyAgenda(allDays[prevIndex]);
                    }
                }
            }

            // 2. SWIPE VERTICAL (Pull-to-Refresh)
            // Verifica se está perto do topo da página E se foi um swipe forte para baixo
            if (window.scrollY < topOfPageThreshold && (touchendY > touchstartY) && (touchendY - touchstartY) > pullThreshold) {
                if (!document.body.classList.contains('is-reloading')) {
                    document.body.classList.add('is-reloading');
                    // Adiciona um pequeno delay para a UX antes de recarregar
                    setTimeout(() => {
                        location.reload(); 
                    }, 400); 
                }
            }
        }

        // Adiciona listeners para capturar o início e fim do toque na tela (para gestos)
        document.addEventListener('touchstart', e => {
            touchstartX = e.changedTouches[0].screenX;
            startY = e.changedTouches[0].screenY;
        }, false);

        document.addEventListener('touchend', e => {
            touchendX = e.changedTouches[0].screenX;
            touchendY = e.changedTouches[0].screenY;
            checkDirection();
        }, false);
        
        // Arrays para nomes de dias e meses (em português)
        const dayNamesFull = ['DOMINGO', 'SEGUNDA-FEIRA', 'TERÇA-FEIRA', 'QUARTA-FEIRA', 'QUINTA-FEIRA', 'SEXTA-FEIRA', 'SÁBADO'];
        const dayNamesShort = ['DOM', 'SEG', 'TER', 'QUA', 'QUI', 'SEX', 'SÁB'];
        
        // Retorna o dia da semana completo e curto
        function getDayNames(date) {
            const dayIndex = date.getDay();
            return {
                full: dayNamesFull[dayIndex],
                short: dayNamesShort[dayIndex]
            };
        }

        // Função para mostrar o alerta (Aviso de Missa ou Novena em local EXTERNO, um dia antes)
        function checkAndShowAlert(currentDay) {
            const alertContainer = document.getElementById('dynamic-alert');
            const alertMessage = document.getElementById('alert-message');
            
            const today = parseInt(currentDay); 
            const tomorrow = today + 1;
            
            let upcomingEvents = [];

            if (dailyAgendaData[tomorrow]) {
                // Filtra para incluir APENAS eventos externos que o Senhor Supremo deseja alertar
                upcomingEvents = dailyAgendaData[tomorrow].events.filter(event => 
                    (event.title.includes('Santa Missa') || event.title.includes('Procissão') || event.title.includes('Visita ao Abrigo') || event.title.includes('Abertura Ano Jubilar')) && 
                    event.church === 'External'
                );
            }

            if (upcomingEvents.length > 0) {
                const tomorrowData = dailyAgendaData[tomorrow];
                let message = `<strong class="text-parish-gold">${tomorrowData.dayName}, ${tomorrowData.dateStr}</strong>: Atenção aos eventos externos:<ul class="list-disc ml-4 mt-1 space-y-1">`;
                
                upcomingEvents.forEach(event => {
                    message += `<li><strong class="text-parish-gold">${event.title}</strong> às <strong class="text-parish-gold">${event.time}</strong> (${event.subtitle || event.church})</li>`;
                });
                message += `</ul>`;
                
                alertMessage.innerHTML = message;
                alertContainer.classList.remove('hidden');
            } else {
                alertContainer.classList.add('hidden');
            }
        }


        // Função principal para carregar a agenda diária
        function loadDailyAgenda(day) {
            // ATUALIZA O DIA ATIVO GLOBAL
            activeDay = day; 

            const data = dailyAgendaData[day];
            const listContainer = document.getElementById('daily-agenda-list');
            const dayTitle = document.getElementById('current-day-title');
            const liturgicalDay = document.getElementById('liturgical-day');
            
            // 1. Checa e mostra o alerta para o dia seguinte
            checkAndShowAlert(day);

            // 2. Limpa e atualiza o conteúdo da agenda
            listContainer.innerHTML = '';
            liturgicalDay.innerHTML = '';

            if (!data || data.events.length === 0) {
                dayTitle.innerHTML = `<span class="text-parish-gold">Dia ${day}</span>, Sem Eventos Agendados`;
                listContainer.innerHTML = `<p class="text-center text-gray-400 py-8">Não há programação pública para este dia.</p>`;
                
            } else {
                const dateParts = data.dateStr.split('/');
                dayTitle.innerHTML = `<span class="text-parish-gold">${data.dayName}</span>, ${dateParts[0]}/${dateParts[1]}`;
                
                // Adiciona o dia litúrgico
                if (data.liturgical) {
                    liturgicalDay.innerHTML = data.liturgical;
                }

                data.events.forEach((event, index) => {
                    // Determina as cores com base no campo 'color'
                    const timeColorClass = event.color.startsWith('text-') ? event.color : `text-${event.color}`;
                    const titleColorClass = event.color.startsWith('text-') ? 'text-white' : `text-${event.color}`;
                    
                    // Cria o elemento do item da agenda
                    const itemDiv = document.createElement('div');
                    itemDiv.className = `flex justify-between items-start py-4 ${index < data.events.length - 1 ? 'border-b border-gray-700' : ''}`;
                    
                    // Renderização aprimorada: só inclui a tag de subtítulo se houver subtítulo
                    itemDiv.innerHTML = `
                        <div class="flex-grow pr-4">
                            <p class="text-xl font-bold ${titleColorClass}">${event.title}</p>
                            ${event.subtitle ? `<p class="text-sm text-gray-400 italic">${event.subtitle}</p>` : ''}
                        </div>
                        <span class="text-3xl font-extrabold ${timeColorClass}">${event.time}</span>
                    `;
                    
                    listContainer.appendChild(itemDiv);
                });
            }
            
            // 3. Atualiza o carrossel de dias (ativa o botão clicado e rola)
            document.querySelectorAll('.day-button-date').forEach(btn => {
                btn.classList.remove('day-active');
                btn.querySelector('.liturgical-text').classList.remove('text-parish-dark');
                btn.querySelector('.liturgical-text').classList.add('text-gray-400');
            });
            const activeDayButton = document.getElementById(`day-${day}`);
            if(activeDayButton) {
                activeDayButton.classList.add('day-active');
                activeDayButton.querySelector('.liturgical-text').classList.remove('text-gray-400');
                activeDayButton.querySelector('.liturgical-text').classList.add('text-parish-dark');
                
                // Rola o carrossel para centralizar o dia ativo
                const carouselContainer = document.getElementById('day-carousel');
                setTimeout(() => {
                    const offset = activeDayButton.offsetLeft - (carouselContainer.offsetWidth / 2) + (activeDayButton.offsetWidth / 2);
                    carouselContainer.scroll({
                        left: offset,
                        behavior: 'smooth'
                    });
                }, 50); // Pequeno delay para garantir que o layout esteja pronto
            }
        }

        // Função para construir o carrossel de dias
        function buildDayCarousel() {
            const carouselContainer = document.getElementById('day-carousel');
            carouselContainer.innerHTML = ''; // Limpa o carrossel
            
            // Data mockada para 01 de Novembro de 2025 (Sábado)
            const mockDate = new Date(2025, 10, 1); 

            for (let i = 1; i <= 30; i++) {
                mockDate.setDate(i);
                const day = i.toString();
                const dayNames = getDayNames(mockDate);
                const data = dailyAgendaData[day];
                // Limita o texto litúrgico para caber no botão
                const liturgicalText = data && data.liturgical ? data.liturgical.split(' ').slice(0, 3).join(' ').replace('SOLENIDADE', 'SOL.') : 'Feria';


                const button = document.createElement('button');
                button.id = `day-${day}`;
                button.className = 'day-button day-button-date text-center p-3 sm:p-4 rounded-xl bg-parish-card text-gray-400 font-semibold hover:bg-parish-card/70 transition duration-200';
                button.setAttribute('onclick', `loadDailyAgenda('${day}')`);
                
                button.innerHTML = `
                    <span class="block text-xl">${i}</span>
                    <span class="block text-xs">${dayNames.short}</span>
                    <span class="liturgical-text text-gray-400 transition-colors">${liturgicalText}</span>
                `;
                
                carouselContainer.appendChild(button);
            }
        }


        // Função para mostrar a seção de conteúdo desejada
        function showSection(targetId) {
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Fecha o menu mobile quando uma opção é selecionada
            document.getElementById('mobile-menu').classList.add('hidden');

            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('nav-active', 'border-b-2', 'border-parish-gold', 'text-parish-gold');
                button.classList.add('text-white');
            });

            const targetSection = document.getElementById(targetId);
            if (targetSection) {
                targetSection.classList.remove('hidden');
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            document.querySelectorAll(`[data-target="${targetId}"]`).forEach(button => {
                button.classList.add('nav-active', 'text-parish-gold', 'border-b-2', 'border-parish-gold');
                button.classList.remove('text-white');
            });
            
            const dayCarouselWrapper = document.getElementById('day-carousel-wrapper');
            
            // CORREÇÃO CRUCIAL: Mostrar/Esconder o Carrossel de Dias
            if (targetId === 'content-agenda') {
                dayCarouselWrapper.classList.remove('hidden'); // MOSTRA
                buildDayCarousel();
                loadDailyAgenda(activeDay); 
            } else {
                dayCarouselWrapper.classList.add('hidden'); // ESCONDE
            }
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            // Lógica para toggle do menu hambúrguer
            document.getElementById('menu-toggle').addEventListener('click', () => {
                document.getElementById('mobile-menu').classList.toggle('hidden');
            });

            // MOCK: Dia atual para demonstração (23 de Novembro - Domingo)
            // Se a data atual for maior que 30, usamos '30', caso contrário, usamos a data real.
            const todayDate = new Date().getDate();
            const initialDayNumber = (todayDate > 30 || todayDate < 1) ? 23 : todayDate; // Garante que caia em 23/Nov/2025 (Domingo)

            // Inicializa a variável de estado global
            activeDay = initialDayNumber.toString();
            
            // 1. Lógica de Navegação por Abas (Clique)
            document.querySelectorAll('.tab-button').forEach(button => {
                button.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = button.getAttribute('data-target');
                    showSection(targetId);
                });
            });

            // 2. Monta o carrossel e carrega a agenda do dia de hoje (23)
            buildDayCarousel();
            loadDailyAgenda(activeDay);
            showSection('content-agenda'); 
        });
    </script>
</body>
</html>
